---
import fs from "node:fs";
import path from "node:path";
import { footerConfig, profileConfig } from "../config";
import { navigateToPage } from "../utils/navigation-utils";
import { url } from "../utils/url-utils";

const currentYear = new Date().getFullYear();

// Baca konten file FooterConfig.html
let customFooterHtml = "";
if (footerConfig.enable) {
  try {
    const footerConfigPath = path.join(
      process.cwd(),
      "src",
      "config",
      "FooterConfig.html"
    );
    customFooterHtml = fs.readFileSync(footerConfigPath, "utf-8");
    // Hapus komentar HTML
    customFooterHtml = customFooterHtml.replace(/<!--[\s\S]*?-->/g, "").trim();
  } catch (error) {
    console.warn("Gagal membaca file FooterConfig.html:", error.message);
  }
}
---

<div
  class="transition border-t border-black/10 dark:border-white/15 my-10 border-dashed mx-32"
></div>
<div
  class="transition border-dashed border-[oklch(85%_0.01_var(--hue))] dark:border-white/15 rounded-2xl mb-12 flex flex-col items-center justify-center px-6"
>
  <div class="transition text-50 text-sm text-center">
    {customFooterHtml && <div class="mb-2" set:html={customFooterHtml} />}
    &copy; <span id="copyright-year">{currentYear}</span>
    {profileConfig.name}. Hak Cipta Dilindungi. /
    <a
      class="transition link text-[var(--primary)] font-medium"
      href={url("rss/")}
      onclick={`event.preventDefault(); navigateToPage('${url("rss/")}')`}
      >RSS</a
    > /
    <a
      class="transition link text-[var(--primary)] font-medium"
      target="_blank"
      href={url("sitemap-index.xml")}>Peta Situs</a
    ><br />
    Ditenagai oleh
    <a
      class="transition link text-[var(--primary)] font-medium"
      target="_blank"
      href="https://astro.build">Astro</a
    > &
    <a
      class="transition link text-[var(--primary)] font-medium"
      target="_blank"
      href="https://github.com/CuteLeaf/Firefly">Firefly</a
    ><br />
  </div>
</div>